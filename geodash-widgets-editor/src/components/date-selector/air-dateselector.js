!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.AirDateTimeselector=e():t.AirDateTimeselector=e()}(this,(()=>(()=>{"use strict";var t={d:(e,s)=>{for(var i in s)t.o(s,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:s[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};function s(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return"string"==typeof t?e.querySelector(t):t}function i(){let{tagName:t="div",className:e="",innerHTML:s="",id:i="",attrs:a={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=document.createElement(t);return e&&n.classList.add(...e.split(" ")),i&&(n.id=i),s&&(n.innerHTML=s),a&&function(t,e){for(let[s,i]of Object.entries(e))void 0!==i&&t.setAttribute(s,i)}(n,a),n}function a(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),i=1;i<e;i++)s[i-1]=arguments[i];t.length?t.forEach((t=>{t.classList.remove(...s)})):t.classList.remove(...s)}function n(){let t=[];for(var e=arguments.length,s=new Array(e),i=0;i<e;i++)s[i]=arguments[i];return s.forEach((e=>{if("object"==typeof e)for(let s in e)e[s]&&t.push(s);else e&&t.push(e)})),t.join(" ")}function l(t,e,s){t.length?t.forEach((t=>{t.addEventListener(e,s)})):t.addEventListener(e,s)}function h(t,e){return!(!t||t===document||t instanceof DocumentFragment)&&(t.matches(e)?t:h(t.parentNode,e))}t.d(e,{default:()=>W});const r="days",d="months",o="changeViewDate",c="changeFocusDate",u="changeSelectedDate",m={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",dateFormat:"MM/dd/yyyy",timeFormat:"hh:mm aa",firstDay:0},p=t=>null!=t;function v(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),i=1;i<e;i++)s[i-1]=arguments[i];return s.filter((t=>t)).forEach((e=>{for(let[s,i]of Object.entries(e))if(p(i)&&"[object Object]"===i.toString()){let e=void 0!==t[s]?t[s].toString():void 0,a=i.toString(),n=Array.isArray(i)?[]:{};t[s]=t[s]?e!==a?n:t[s]:n,v(t[s],i)}else t[s]=i})),t}function y(t,e,s){return t.replace(e,(function(t,e,i,a){return e+s+a}))}function g(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m,i=e,a=D(t=S(t)),n=a.dayPeriod,l=_(t),h={T:t.getTime(),m:a.minutes,mm:a.fullMinutes,h:a.hours12,hh:a.fullHours12,H:a.hours,HH:a.fullHours,aa:n,AA:n.toUpperCase(),E:s.daysShort[a.day],EEEE:s.days[a.day],d:a.date,dd:a.fullDate,M:a.month+1,MM:a.fullMonth,MMM:s.monthsShort[a.month],MMMM:s.months[a.month],yy:a.year.toString().slice(-2),yyyy:a.year,yyyy1:l[0],yyyy2:l[1]};for(let[t,e]of Object.entries(h))i=y(i,C(t),e);return i}function D(t){let e=t.getHours(),{hours:s,dayPeriod:i}=function(t){return{dayPeriod:t>11?"pm":"am",hours:t%12==0?12:t%12}}(e);return{year:t.getFullYear(),month:t.getMonth(),fullMonth:t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,date:t.getDate(),fullDate:t.getDate()<10?"0"+t.getDate():t.getDate(),day:t.getDay(),hours:e,fullHours:f(e),hours12:s,dayPeriod:i,fullHours12:f(s),minutes:t.getMinutes(),fullMinutes:t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes()}}function f(t){return t<10?"0"+t:t}function _(t){let e=10*Math.floor(t.getFullYear()/10);return[e,e+9]}function b(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;if(!t||!e)return!1;let i=D(t),a=D(e);return{[r]:i.date===a.date&&i.month===a.month&&i.year===a.year,[d]:i.month===a.month&&i.year===a.year,years:i.year===a.year}[s]}function $(t,e,s){let i=M(t,!1).getTime(),a=M(e,!1).getTime();return s?i>=a:i>a}function w(t,e){return!$(t,e,!0)}function M(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=new Date(t.getTime());return"boolean"!=typeof e||e||function(t){t.setHours(0,0,0,0)}(s),s}function S(t){let e=t;return t instanceof Date||(e=new Date(t)),isNaN(e.getTime())&&(console.log(`Unable to convert value "${t}" to Date object`),e=!1),e}function C(t){let e="\\s|\\.|-|/|\\\\|,|\\$|\\!|\\?|:|;";return new RegExp("(^|>|"+e+")("+t+")($|<|"+e+")","g")}const N=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function L(t){return t<10?"0"+t:`${t}`}function T(t,e){return function(t,e){return t=S(t),p(e)?dObj.toLocaleDateString(e):[L(t.getDate()),L(t.getMonth()+1),t.getFullYear()].join("/")}(t=S(t),e)+", "+function(t,e){return t=S(t),p(e)?t.toLocaleTimeString(e):[L(t.getHours()),L(t.getMinutes()),L(t.getSeconds())].join(":")}(t,e)}const E=t=>{let e;return e=t<=0?4:t>3&&t<21||t%10>3?0:t%10,t+["th","st","nd","rd",""][e]};function H(t,e,s){let i=g(t=S(t),e);if(s&&"pentadal"===s){const[e,s]=function(t){t=S(t);const e=(i=t,new Date(i.getFullYear(),i.getMonth()+1,0)).getDate(),s=t.getDate();var i;return s<=5?[1,"1-5th",1]:s<=10?[2,"6-10th",6]:s<=15?[3,"11-15th",11]:s<=20?[4,"16-20th",16]:s<=25?[4,"21-25th",21]:[6,`26-${E(e)}`,26]}(t);i=`${i} - P${e} ${s}`}return i}function k(t){return[...new Set(t.map((t=>t.getMonth())))]}function O(t){return[...new Set(t.map((t=>t.getDate())))]}function F(t){return[...new Set(t.map((t=>t.getHours())))]}class x{constructor(t,e){this.dts=t,this.opts=e,this.init()}init(){this._createElement(),this._buildBaseHtml(),this._defineDOM(),this.render(),this.handleNavStatus(),this._bindEvents()}_createElement(){this.$el=i({tagName:"nav",className:"air-dts-nav"})}_buildBaseHtml(){this.$el.innerHTML='<div class="air-dts-nav--action" data-action="prevTime"><svg><path d="M 17,12 l -5,5 l 5,5"></path></svg></div><button class="air-dts-nav--title"></button><div class="air-dts-nav--action" data-action="nextTime"><svg><path d="M 14,12 l 5,5 l -5,5"></path></svg></div>'}_defineDOM(){this.$title=s(".air-dts-nav--title",this.$el),this.$prevTime=s('[data-action="prevTime"]',this.$el),this.$nextTime=s('[data-action="nextTime"]',this.$el)}_bindEvents(){this.$el.addEventListener("click",this.onClickNav),this.$title.addEventListener("click",this.onClickNavTitle),this.$title.addEventListener("blur",this._onBlur)}_onBlur=t=>{!this.dts.portal.inFocus&&this.dts.portal.visible&&this.dts.portal.hide()};_getTitle(){let{dts:t}=this;return t.formatDate()}_disableNav(t){s('[data-action="'+t+'"]',this.$el).classList.add("-disabled-")}_resetNavStatus(){a(this.$el.querySelectorAll(".air-dts-nav--action"),"-disabled-")}onClickNav=t=>{let e=h(t.target,".air-dts-nav--action");if(!e)return;let s=e.dataset.action;this.dts[s]()};onClickNavTitle=()=>{this.dts.toggleSelector()};_resetNavStatus(){a(this.$el.querySelectorAll(".air-dts-nav--action"),"-disabled-")}handleNavStatus(){let{minDate:t,maxDate:e,selectedDate:s}=this.dts;t>=s&&this._disableNav("prevTime"),e<=s&&this._disableNav("nextTime")}renderDelay=()=>{setTimeout(this.render)};update=()=>{this._resetNavStatus(),this.render(),this.handleNavStatus()};render=()=>{this.$title.innerHTML=this._getTitle()}}const V={classes:"",locale:m,firstDay:"",weekends:[6,0],dateFormat:"",selectedDate:!1,showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,monthsField:"monthsShort",prevHtml:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MMMM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},onSelect:!1,onChangeViewDate:!1,onShow:!1,onHide:!1};let B={on(t,e){this.__events||(this.__events={}),this.__events[t]?this.__events[t].push(e):this.__events[t]=[e]},off(t,e){this.__events&&this.__events[t]&&(this.__events[t]=this.__events[t].filter((t=>t!==e)))},removeAllEvents(){this.__events={}},trigger(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),i=1;i<e;i++)s[i-1]=arguments[i];this.__events&&this.__events[t]&&this.__events[t].forEach((t=>{t(...s)}))}};class A{constructor(t,e){let{date:s,opts:i,body:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.dts=t,this.ds=e,this.date=s,this.opts=i,this.body=a,this.customData=!1,this.init()}init(){this.dts.includeDates&&this.dts.includeDates.find((t=>b(t,this.date)))||(this.customData={disabled:!0}),this._createElement(),this._bindDateselectorEvents(),this._handleInitialFocusStatus(),this.ds.hasSelectedDate&&this._handleSelectedStatus()}_bindDateselectorEvents(){this.ds.on(u,this.onChangeSelectedDate),this.ds.on(c,this.onChangeFocusDate)}unbindDateselectorEvents(){this.ds.off(u,this.onChangeSelectedDate),this.ds.off(c,this.onChangeFocusDate)}_createElement(){let{year:t,month:e,date:s}=D(this.date),a=this.customData?.attrs||{};this.$cell=i({className:this._getClassName(),attrs:{"data-year":t,"data-month":e,"data-date":s,...a}})}_getClassName(){let{selectOtherMonths:t}=this.opts,{minDate:e,maxDate:s}=this.ds,{day:i}=D(this.date),a=this.customData?.disabled,l=n("air-cal-cell","-day-",{"-min-date-":e&&b(e,this.date),"-max-date-":s&&b(s,this.date)});const h=n({"-weekend-":this.ds.isWeekend(i),"-other-month-":this.isOtherMonth,"-disabled-":this.isOtherMonth&&!t||a});return n(l,h,this.customData?.classes)}_getHtml(){let{date:t}=D(this.date),{showOtherMonths:e}=this.opts;return this.customData?.html?this.customData.html:!e&&this.isOtherMonth?"":t}destroy(){this.unbindDateselectorEvents()}focus=()=>{this.$cell.classList.add("-focus-"),this.focused=!0};removeFocus=()=>{this.$cell.classList.remove("-focus-"),this.focused=!1};select=()=>{this.$cell.classList.add("-selected-"),this.selected=!0};removeSelect=()=>{this.$cell.classList.remove("-selected-"),this.selected=!1};_handleSelectedStatus(){let t=this.ds._checkIfDateIsSelected(this.date);t?this.select():!t&&this.selected&&this.removeSelect()}_handleInitialFocusStatus(){b(this.ds.focusDate,this.date)&&this.focus()}get isDisabled(){return this.$cell.matches(".-disabled-")}get isOtherMonth(){return this.ds.isOtherMonth(this.date)}get isOtherDecade(){return this.ds.isOtherDecade(this.date)}onChangeSelectedDate=()=>{this.isDisabled||this._handleSelectedStatus()};onChangeFocusDate=t=>{if(!t)return void(this.focused&&this.removeFocus());let e=b(t,this.date);e?this.focus():!e&&this.focused&&this.removeFocus()};render=()=>(this.$cell.innerHTML=this._getHtml(),this.$cell.adpCell=this,this.$cell)}const I=".air-cal-cell";class j{constructor(t,e,s){this.dts=t,this.ds=e,this.opts=s,this.cells=[],this.$el="",this.pressed=!1,this.isVisible=!0,this.init()}init(){this._buildBaseHtml(),this.renderDayNames(),this.render(),this._bindEvents(),this._bindDateselectorEvents()}_bindEvents(){l(this.$el,"mouseover",this.onMouseOverCell),l(this.$el,"mouseout",this.onMouseOutCell),l(this.$el,"click",this.onClickBody)}_bindDateselectorEvents(){this.ds.on(o,this.onChangeViewDate)}_buildBaseHtml(){this.$el=i({className:"air-cal-body -days-",innerHTML:'<div class="air-cal-body--day-names"></div><div class="air-cal-body--cells -days-"></div>'}),this.$names=s(".air-cal-body--day-names",this.$el),this.$cells=s(".air-cal-body--cells",this.$el)}_getDayNamesHtml(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.ds.locale.firstDay,e="",s=this.ds.isWeekend,{onClickDayName:i}=this.opts,a=t,l=0;for(;l<7;){let t=a%7;e+=`<div class="${n("air-cal-body--day-name",{"-weekend-":s(t),"-clickable-":!!i})}" data-day-index='${t}'>${this.ds.locale.daysMin[t]}</div>`,l++,a++}return e}renderDayNames(){this.$names.innerHTML=this._getDayNamesHtml()}_generateCell(t){let{ds:e,opts:s}=this;return new A(this.dts,this.ds,{opts:s,date:t,body:this})}_generateCells(){j.getDaysDates(this.ds,(t=>{this.cells.push(this._generateCell(t))}))}show(){this.isVisible=!0,this.$el.classList.remove("-hidden-")}hide(){this.isVisible=!1,this.$el.classList.add("-hidden-")}destroyCells(){this.cells.forEach((t=>t.destroy())),this.cells=[],this.$cells.innerHTML=""}destroy(){this.destroyCells(),this.ds.off(o,this.onChangeViewDate)}handleClick=t=>{let e=t.target.closest(I).adpCell;e.isDisabled||this.ds.selectDate(e.date)};handleDayNameClick=t=>{let e=t.target.getAttribute("data-day-index");this.opts.onClickDayName({dayIndex:Number(e),dateselector:this.ds})};onMouseOverCell=t=>{let e=h(t.target,I);this.ds.setFocusDate(!!e&&e.adpCell.date)};onMouseOutCell=()=>{this.ds.setFocusDate(!1)};onClickBody=t=>{let{onClickDayName:e}=this.opts,s=t.target;s.closest(I)&&this.handleClick(t),e&&s.closest(".air-cal-body--day-name")&&this.handleDayNameClick(t)};onMouseDown=t=>{this.pressed=!0;let e=h(t.target,I);e&&e.adpCell};onMouseUp=()=>{this.pressed=!1};onChangeViewDate=(t,e)=>{this.isVisible&&(b(t,e,d)||this.render())};render=()=>{this.destroyCells(),this._generateCells(),this.cells.forEach((t=>{this.$cells.appendChild(t.render())}))};static getDaysDates(t,e){let{viewDate:s,locale:{firstDay:i}}=t,a=(c=s,new Date(c.getFullYear(),c.getMonth()+1,0).getDate()),{year:n,month:l}=D(s),h=new Date(n,l,1),r=new Date(n,l,a),d=h.getDay()-i,o=6-r.getDay()+i;var c;d=d<0?d+7:d,o=o>6?o-7:o;let u=function(t,e){let{year:s,month:i,date:a}=D(t);return new Date(s,i,a-e)}(h,d),m=a+d+o,p=u.getDate(),{year:v,month:y}=D(u),g=0;const f=[];for(;g<m;){let t=new Date(v,y,p+g);e&&e(t),f.push(t),g++}return f}}class P{constructor(t,e,s){this.dts=t,this.ds=e,this.opts=s,this.init()}init(){this._createElement(),this._buildBaseHtml(),this._defineDOM(),this.render(),this.handleNavStatus(),this._bindEvents(),this._bindDateselectorEvents()}_defineDOM(){this.$title=s(".air-cal-nav--title",this.$el),this.$prev=s('[data-action="prev"]',this.$el),this.$next=s('[data-action="next"]',this.$el)}_bindEvents(){this.$el.addEventListener("click",this.onClickNav)}_bindDateselectorEvents(){this.ds.on(o,this.onChangeViewDate),this.isNavIsFunction&&this.ds.on(u,this.renderDelay)}destroy(){this.ds.off(o,this.onChangeViewDate),this.isNavIsFunction&&this.ds.off(u,this.renderDelay)}_createElement(){this.$el=i({tagName:"nav",className:"air-cal-nav"})}_getTitle(){let{dts:t,ds:e,opts:s}=this,i=s.navTitles.days;return g(e.viewDate,i)}handleNavStatus(){let{minDate:t,maxDate:e}=this.dts;if(!t&&!e)return;let{year:s,month:i}=this.ds.parsedViewDate,a=!!t&&D(t),n=!!e&&D(e);t&&a.month>=i&&a.year>=s&&this._disableNav("prev"),e&&n.month<=i&&n.year<=s&&this._disableNav("next")}_disableNav(t){s('[data-action="'+t+'"]',this.$el).classList.add("-disabled-")}_resetNavStatus(){a(this.$el.querySelectorAll(".air-cal-nav--action"),"-disabled-")}onClickNav=t=>{let e=h(t.target,".air-cal-nav--action");if(!e)return;let s=e.dataset.action;this.ds[s]()};onChangeViewDate=()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()};_buildBaseHtml(){let{prevHtml:t,nextHtml:e}=this.opts;this.$el.innerHTML=`<div class="air-cal-nav--action" data-action="prev">${t}</div><div class="air-cal-nav--title"></div><div class="air-cal-nav--action" data-action="next">${e}</div>`}get isNavIsFunction(){let{navTitles:t}=this.opts;return Object.keys(t).find((e=>"function"==typeof t[e]))}update=()=>{let{prevHtml:t,nextHtml:e}=this.opts;this.$prev.innerHTML=t,this.$next.innerHTML=e,this._resetNavStatus(),this.render(),this.handleNavStatus()};renderDelay=()=>{setTimeout(this.render)};render=()=>{this.$title.innerHTML=this._getTitle()}}class R{static defaults=V;constructor(t,e,a){this.$el=s(t),this.dts=e,this.$el&&(this.$dateselector=i({className:"air-cal"}),this.opts=v({},V,a),this.inited=!1,this.dts.portalStateDate?this.viewDate=S(this.dts.portalStateDate):this.viewDate=S(this.dts.maxDate),this.focusDate=!1,this.calendarView=null,this.init())}init(){this._handleLocale(),this._bindSubEvents(),this._limitViewDateByMaxMinDates(),this._bindEvents(),this._createComponents()}_createComponents(){let{dts:t,opts:e,opts:{classes:s}}=this;this._buildBaseHtml(),this.$dateselector.classList.add("-inline-"),s&&this.$dateselector.classList.add(...s.split(" ")),this.calendarView=new j(t,this,e),this.nav=new P(t,this,e),this.$content.appendChild(this.calendarView.$el),this.$nav.appendChild(this.nav.$el)}_destroyComponents(){this.calendarView.destroy(),this.calendarView=!1,this.nav.destroy()}_createMinMaxDates(){let{minDate:t,maxDate:e}=this.dts;this.minDate=!!t&&S(t),this.maxDate=!!e&&S(e)}_limitViewDateByMaxMinDates(){let{viewDate:t,minDate:e,maxDate:s}=this;s&&$(t,s)&&this.setViewDate(s),e&&w(t,e)&&this.setViewDate(e)}_bindSubEvents(){this.on(u,this._onChangeSelectedDate)}_buildBaseHtml(){this.$el.appendChild(this.$dateselector),this.$dateselector.innerHTML='<div class="air-cal--navigation"></div><div class="air-cal--content"></div>',this.$content=s(".air-cal--content",this.$dateselector),this.$nav=s(".air-cal--navigation",this.$dateselector)}_handleLocale(){let{locale:t,firstDay:e}=this.opts;var s;this.locale=(s=t,JSON.parse(JSON.stringify(s))),""!==e&&(this.locale.firstDay=e)}_bindEvents(){this.$el.addEventListener(this.opts.showEvent,this._onFocus),this.$dateselector.addEventListener("mousedown",this._onMouseDown),this.$dateselector.addEventListener("mouseup",this._onMouseUp),window.addEventListener("resize",this._onResize)}next=()=>{let{year:t,month:e}=this.parsedViewDate;this.setViewDate(new Date(t,e+1,1))};prev=()=>{let{year:t,month:e}=this.parsedViewDate;this.setViewDate(new Date(t,e-1,1))};down(t){this._handleUpDownActions(t,"down")}up(t){this._handleUpDownActions(t,"up")}selectDate(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((t=S(t))instanceof Date)return this.selectedDate=t,this.trigger(u,{action:"selectDate",silent:e?.silent,date:t}),new Promise((t=>{setTimeout(t)}))}clear(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.selectedDate=!1,this.trigger(u,{action:"unselectDate",silent:t.silent}),new Promise((t=>{setTimeout(t)}))}show(){this._createComponents(),this.$dateselector.classList.add("-active-")}hide(){this.$dateselector.classList.remove("-active-")}_triggerOnSelect(){let{onSelect:t}=this.opts;t(this.selectedDate)}_checkIfDateIsSelected=t=>{let e=!1;return this.selectedDate&&b(t,this.selectedDate)&&(e=this.selectedDate),e};_handleUpDownActions(t,e){if(!((t=S(t||this.focusDate||this.viewDate))instanceof Date))return;let s="up"===e?this.viewIndex+1:this.viewIndex-1;s>2&&(s=2),s<0&&(s=0),this.setViewDate(new Date(t.getFullYear(),t.getMonth(),1))}setViewDate=t=>{if(!((t=S(t))instanceof Date))return;if(b(t,this.viewDate))return;let e=this.viewDate;this.viewDate=t,this.trigger(o,t,e)};setFocusDate=(()=>{var t=this;return function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(!e||(e=S(e))instanceof Date)&&(t.focusDate=e,t.trigger(c,e,s))}})();getCell(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"day";if(!((t=S(t))instanceof Date))return;let{year:s,month:i,date:a}=D(t),n=`[data-year="${s}"]`,l=`[data-month="${i}"]`,h={day:`${n}${l}[data-date="${a}"]`,month:`${n}${l}`,year:`${n}`};return this.calendarView.$el.querySelector(h[e])}destroy=()=>{let t=this.$dateselector.parentNode;t&&t.removeChild(this.$dateselector),window.removeEventListener("resize",this._onResize),this.calendarView=null,this.nav=null,this.$dateselector=null,this.opts=null,this.$customContainer=null,this.viewDate=null,this.focusDate=null,this.selectedDate=null};update=(()=>{var t=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=v({},t.opts);v(t.opts,e);let{selectedDate:i}=t.opts;t._createMinMaxDates(),t._limitViewDateByMaxMinDates(),t._handleLocale(),!s.selectedDate&&i&&t.selectDate(i),t.nav.update(),t.calendarView.render(),t.calendarView.renderDayNames()}})();isOtherMonth=t=>{let{month:e}=D(t);return e!==this.parsedViewDate.month};isOtherYear=t=>{let{year:e}=D(t);return e!==this.parsedViewDate.year};isOtherDecade=t=>{let{year:e}=D(t),[s,i]=_(this.viewDate);return e<s||e>i};_onChangeSelectedDate=t=>{let{silent:e}=t;setTimeout((()=>{this._triggerOnSelect()}))};getViewDates=()=>j.getDaysDates(this);get shouldUpdateDOM(){return this.visible||this.treatAsInline}get parsedViewDate(){return D(this.viewDate)}get curDecade(){return _(this.viewDate)}get hasSelectedDate(){return this.selectedDate}get $container(){return this.$customContainer||""}isWeekend=t=>this.opts.weekends.includes(t);getClampedDate=t=>{let{minDate:e,maxDate:s}=this,i=t;return s&&$(t,s)?i=s:e&&w(t,e)&&(i=e),i}}var Y;Y=R.prototype,Object.assign(Y,B);class G{constructor(t,e){this.dts=t,this.opts=e,this.$el=i({className:"air-dts--content"}),this.datesObject=function(t){const e=[...new Set(t.map((t=>t.getFullYear())))],s=[...new Set(e.map((t=>Math.floor(t/100))))],i=s.reduce(((s,i)=>v(s,function(t,e,s){const i=s.filter((e=>Math.floor(e/100)===t)),a=function(t,e){return e.filter((e=>Math.floor(e.getFullYear()/100)===t))}(t,e),n={[t]:i.reduce(((t,s)=>v(t,function(t,e){const s=function(t,e){return e.filter((e=>e.getFullYear()===t))}(t,e),i={};return k(s).forEach((t=>{const e=function(t,e){return t.filter((t=>t.getMonth()===e))}(s,t),a={};O(e).forEach((t=>{a.dates=e,a.indice=O(e);const s={},i=function(t,e){return t.filter((t=>t.getDate()===e))}(e,t);F(i).forEach((t=>{s[t]=function(t,e){return t.filter((t=>t.getHours()===e))}(i,t),s.dates=i,s.indice=F(i)})),a[t]=s})),i[t]=a,i.indice=k(s),i.dates=s})),{[t]:i}}(s,e))),{})};return n[t].dates=a,n[t].indice=i,n}(i,t,e))),{});return i.dates=t,i.indice=s,i}(this.dts.includeDates),this.state={century:null,year:null,month:null,day:null,time:null,hour:null,granularity:null},this.init()}init(){this._initState()}_initState(){if(this.dts.portalState)return void this._setState(this.dts.portalState);let t=null,e=null,s=null,i=null,a="century";const{datesObject:n}=this;if(1===n.indice.length){const l=n.indice[0],h=n[l];if(t=l,1===h.indice.length){const t=h.indice[0],n=h[t];if(e=t,a="year",1===n.indice.length){const t=n.indice[0],e=n[t];s=t,a="month",1===e.indice&&(i=e.indice[0])}}}this._setState({century:t,year:e,month:s,day:i,time:null,granularity:a})}_setState(t){this.state={...this.state,...t},this.dts.portalState=this.state,this.render()}_buildCenturyGrid(t){if(t.dates&&t.dates.length>=12){const e=t.indice,s=i({className:"grid",innerHTML:'<div class="gridHeading"> Select a century</div>'});return e.forEach((t=>{const e=i({tagName:"button",className:"centuryBtn",innerHTML:`${t}00`});e.addEventListener("click",(()=>{this._setState({century:t})})),s.appendChild(e)})),s}return this._buildList(t.dates)}_buildYearGrid(t){if(t.dates&&t.dates.length>=12){const e=t.indice,a=Array.apply(null,{length:12}).map(Number.call,Number),n=i({className:"grid",innerHTML:'<div class="gridHeading"> Select a year</div><div class="gridBody"></div>'}),l=s(".gridBody",n);return e.forEach((e=>{const n=i({className:"gridRow",innerHTML:`<span class="gridLabel">${e}</span><span class="gridRowInner12"></span>`});n.addEventListener("click",(()=>{this._setState({year:e,month:null,day:null,time:null})})),a.forEach((a=>{const l=i({tagName:"span",className:t[e][a]?"activeGrid":""});s(".gridRowInner12",n).appendChild(l)})),l.appendChild(n)})),n}return this._buildList(t.dates)}_buildMonthGrid(t){const e=this.state.year;if(t[e].dates&&t[e].dates.length>12){const a=i({className:"grid",innerHTML:'<div class="gridHeading"></div><div class="gridBody"></div>'}),l=s(".gridBody",a),h=i({tagName:"button",className:"backbtn",innerHTML:this.state.year});return h.addEventListener("click",(()=>{this._setState({year:null,month:null,day:null,time:null})})),s(".gridHeading",a).appendChild(h),N.forEach(((a,h)=>{const r=i({className:n("gridRow",{inactiveGridRow:!p(t[e][h])}),innerHTML:`<span class="gridLabel">${a}</span><span class="gridRowInner31"></span>`});r.addEventListener("click",(()=>{p(t[e][h])&&this._setState({month:h,day:null,time:null})}));const d=s(".gridRowInner31",r);(function(t,e){const s=new Date(e,t,0).getDate();return Array.apply(null,{length:s}).map(Number.call,Number)})(h,e).forEach((s=>{const a=i({tagName:"span",className:n({activeGrid:p(t[e][h])&&p(t[e][h][s+1])})});d.appendChild(a)})),l.appendChild(r)})),a}return this._buildList(t[e].dates)}_buildDayView(t){if(t[this.state.year][this.state.month].dates&&t[this.state.year][this.state.month].dates.length>31){const t=i({className:"dayPicker",innerHTML:'<div class="daypicker-wrapper"></div>'}),e=s(".daypicker-wrapper",t),a=i({tagName:"button",className:"backbtn",innerHTML:this.state.year});a.addEventListener("click",(()=>{this._setState({year:null,month:null,day:null,time:null})}));const n=i({tagName:"button",className:"backbtn",innerHTML:N[this.state.month]});return n.addEventListener("click",(()=>{this._setState({month:null,day:null,time:null})})),e.appendChild(a),e.appendChild(n),this.dateSelector=new R(t,this.dts,{...this.opts.calendarOptions,onSelect:t=>{this._setState({day:t.getDate(),month:t.getMonth()})}}),this.dateSelector.$el}return this._buildList(t[this.state.year][this.state.month].dates)}_buildHourView(t){if(t[this.state.year][this.state.month][this.state.day].dates.map((t=>({value:t,label:T(t)}))).length>24){const e=i({className:"grid",innerHTML:`<div class="gridHeading">Select an hour on ${this.state.day} ${N[this.state.month]} ${this.state.year} </div><div class='gridBody'></div>`}),a=s(".gridBody",e);return t[this.state.year][this.state.month][this.state.day].indice.forEach((e=>{const s=`${t[this.state.year][this.state.month][this.state.day][e].length}`,n=i({tagName:"button",className:"dateBtn",innerHTML:`<span>${e}:00 - ${e+1}:00 </span> <span>  (${s} options)</span>`});n.addEventListener("click",(()=>{this._setState({hour:e})})),a.appendChild(n)})),e}return this._buildList(t[this.state.year][this.state.month][this.state.day].dates)}_buildMinutesView(t){const e=t[this.state.year][this.state.month][this.state.day][this.state.hour];return this._buildList(e)}_buildList(t){const e=i({className:"grid",innerHTML:'<div class="gridHeading">Select a time</div><div class="gridBody"></div>'}),a=s(".gridBody",e);return t.forEach((t=>{const e=i({tagName:"button",className:"dateBtn",innerHTML:p(this.opts.dateFormat)?H(t,this.opts.dateFormat.currentTime,this.opts.dateFormat.asPeriod):T(t)});e.addEventListener("click",(()=>{this.dts.updateSelectedDate(t)})),a.appendChild(e)})),e}goBack=()=>{p(this.state.time)?(p(this.state.month)||this._setState({year:null,month:null,day:null}),p(this.state.hour)||this._setState({day:null}),p(this.state.day)||this._setState({month:null,day:null}),this._setState({hour:null,time:null})):p(this.state.hour)?this._setState({hour:null,time:null}):p(this.state.day)?this._setState({day:null,time:null,hour:null}):p(this.state.month)?this._setState({month:null,time:null,day:null,hour:null}):p(this.state.year)?this._setState({year:null,month:null,time:null,day:null,hour:null}):p(this.state.century)&&this._setState({century:null,year:null,month:null,time:null,day:null,hour:null})};destroy(){this.$el.innerHTML=""}_buildBackBtn(){const t=i({tagName:"button",className:"backbutton",innerHTML:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',attrs:{...!this.state[this.state.granularity]&&{disabled:!0}}});return t.addEventListener("click",this.goBack),t}render(){this.destroy();const{datesObject:t}=this,{century:e,year:s,month:i,day:a,hour:n}=this.state;this.$el.appendChild(this._buildBackBtn()),p(e)?!p(e)||p(s)?!p(s)||p(i)?p(s)&&p(i)&&!p(a)?this.$el.appendChild(this._buildDayView(t[e])):p(s)&&p(i)&&p(a)&&!p(n)?this.$el.appendChild(this._buildHourView(t[e])):p(s)&&p(i)&&p(a)&&p(n)&&this.$el.appendChild(this._buildMinutesView(t[e])):this.$el.appendChild(this._buildMonthGrid(t[e])):this.$el.appendChild(this._buildYearGrid(t[e])):this.$el.appendChild(this._buildCenturyGrid(t))}}let J="",U=!1;class z{static defaultGlobalContainerId="air-dts-portal-container";static buildGlobalContainer(t){U=!0,J=i({className:t,id:t}),s("body").appendChild(J)}constructor(t,e){this.dts=t,this.opts=e,this.$portal=i({className:"air-dts air-dts-portal"}),this.inited=!1,this.visible=!1,this.inFocus=!1,this.opened=!1,this.init()}init(){let t=s("body");(!U||U&&J&&!t.contains(J))&&z.buildGlobalContainer(z.defaultGlobalContainerId),this._bindEvents()}_bindEvents(){this.$portal.addEventListener("mousedown",this._onMouseDown),this.$portal.addEventListener("mouseup",this._onMouseUp),window.addEventListener("resize",this._onResize)}_onMouseDown=t=>{this.inFocus=!0};_onMouseUp=t=>{this.inFocus=!1,this.dts.nav.$title.focus()};_onResize=()=>{this.visible&&this.setPosition()};toggleVisibility(){this.visible?this.hide():this.show()}show(){this.visible||this._createComponents(),this.setPosition(),this.$portal.classList.add("-active-"),this.visible=!0,this.opened=!0}hide(){this.visible=!1,this.$portal.classList.remove("-active-"),this.$portal.innerHTML="",this._destroyComponents(),this.$container.removeChild(this.$portal)}_setPositionClasses(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bottom left";t=t.split(" ");let e=t[0],s=`-${e}-${t[1]}- -from-${e}-`;this.$portal.classList.add(...s.split(" "))}_destroyComponents(){this.body.destroy()}setPosition=()=>{let t,e,s=this.dts.$el.getBoundingClientRect(),i=this.dts.$el.getBoundingClientRect(),a=this.$portal.offsetParent,n=this.dts.$el.offsetParent,l=this.$portal.getBoundingClientRect(),h="bottom left".split(" "),r=window.scrollY,d=window.scrollX,o=this.opts.offset,c=h[0],u=h[1];if(a===n&&a!==document.body&&(i={top:this.$el.offsetTop,left:this.$el.offsetLeft,width:s.width,height:this.$el.offsetHeight},r=0,d=0),a!==n&&a!==document.body){let t=a.getBoundingClientRect();i={top:s.top-t.top,left:s.left-t.left,width:s.width,height:s.height},r=0,d=0}switch(c){case"top":t=i.top-l.height-o;break;case"right":e=i.left+i.width+o;break;case"bottom":t=i.top+i.height+o;break;case"left":e=i.left-l.width-o}switch(u){case"top":t=i.top;break;case"right":e=i.left+i.width-l.width;break;case"bottom":t=i.top+i.height-l.height;break;case"left":e=i.left;break;case"center":/left|right/.test(c)?t=i.top+i.height/2-l.height/2:e=i.left+i.width/2-l.width/2}this.$portal.style.cssText=`left: ${e+d}px; top: ${t+r}px`};get $container(){return J}_createComponents(){let{opts:t,dts:e}=this;this._buildBaseHtml(),this._setPositionClasses(),this.body=new G(e,t),this.$portal.appendChild(this.body.$el)}_buildBaseHtml(){this.$container.appendChild(this.$portal)}}class W{constructor(t,e){if(this.$el=s(t),!this.$el)return;if(this.$nav=i({className:"air-dts air-dts--navigation"}),this.$el.appendChild(this.$nav),this.opts=e,this.portalState=null,!this.opts.includeDates||!this.opts.includeDates.length)return;this.includeDates=this.opts.includeDates.map((t=>S(t))),this.includeDates.sort(((t,e)=>t.getTime()-e.getTime())),this.minDate=this.includeDates[0],this.maxDate=this.includeDates[this.includeDates.length-1];const{selectedDate:a}=this.opts;if(a){const t=S(a),e=this.includeDates.find((e=>e.getTime()===t.getTime()));this.selectedDate=e?t:null}else this.selectedDate=this.includeDates[this.includeDates.length-1];this.init()}init(){this._createComponents()}closePortal=()=>{this.portal.hide()};_createComponents(){let{opts:t}=this;this.nav=new x(this,{includeDates:this.includeDates,selectedDate:this.selectedDate,dateFormat:t.dateFormat}),this.$nav.appendChild(this.nav.$el),this.portal=new z(this,{onSelect:this.opts.onSelect,dateFormat:t.dateFormat,offset:2})}formatDate(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectedDate;const{dateFormat:e}=this.opts;return p(e)?H(t,e.currentTime,e.asPeriod):T(t)}toggleSelector(){this.portal.toggleVisibility()}prevTime(){const t=this._getCurrentTimeIndex();0!==t&&this.updateSelectedDate(this.includeDates[t-1])}updateSelectedDate(t){this.selectedDate=t,this.nav.update(),this.opts.onSelect&&this.opts.onSelect(this.selectedDate),this.portal&&this.portal.visible&&this.portal.hide()}nextTime(){const t=this._getCurrentTimeIndex();t!==this.includeDates.length-1&&this.updateSelectedDate(this.includeDates[t+1])}_getCurrentTimeIndex=()=>{const{includeDates:t,selectedDate:e}=this;return t.findIndex((t=>t.getTime()===S(e).getTime()))};render(){}get parsedSelectedDate(){return D(this.selectedDate)}get portalStateDate(){if(!this.portalState)return;const{year:t,month:e}=this.portalState;return t&&e?S(`${t}-${e}-01`):t?S(`${t}-01-01`):void 0}}return e.default})()));